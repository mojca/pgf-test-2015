% Copyright 2011 by Jannis Pohlmann
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Free Documentation License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\section{Standard Graph Drawing Algorithms}
\label{section-library-graphdrawing-standard}

{\emph{by Jannis Pohlmann}}

\begin{tikzlibrary}{graphdrawing.standard}
  This package needs to be loaded in order to use any of the automatic
  graph drawing algorithms described in this chapter. It extends the
  |graphdrawing| package by a set of standard graph drawing 
  algorithms and provides \tikzname\ options for selecting and 
  configuring them.
\end{tikzlibrary}

\subsection{Orientation of Graph Drawings}

The drawing computed for a graph may be pleasing in general but some
algorithms like the |spring| algorithm show the tendency to generate
drawings with an unexpected orientation. Also, if several graphs are 
defined in a single |{tikzpicture}| then these will possibly overlap.
As a consequence, a postprocessing step is sometimes necessary in order
to adjust the orientation of the graph drawing. This can be achieved in
a relatively simple way using the options described here.

\begin{key}{/tikz/orientation=\meta{colon-separated list}}
  With graph drawing algorithms it makes sense with, the |graphdrawing|
  library will, by default and in a postprocessing step, attempt to
  detect the principal axis of the graph automatically and will adjust
  its orientation so that it is parallel to the $x$ axis.

  This behavior may be altered by setting |orientation| using one of
  the following notations:
  |(|\meta{first axis node}|):(|\meta{second axis node}|)| specifies
  two nodes that together define the axis of the graph drawing. The
  drawing is then rotated so that this axis is parallel to the $x$
  axis, with \meta{first axis node} being located left of \meta{second
  axis node}:
  \begin{codeexample}[]
\tikz \graph [experimental layout] { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(a):(c)] { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(c):(a)] { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(1):(4)] { subgraph K_n[n=5] };
\tikz \graph [experimental layout,orientation=(4):(1)] { subgraph K_n[n=5] };
  \end{codeexample}
  The angle to the $x$ axis can be changed easily by using the
  |(|\meta{first axis node}|):|\meta{angle}|:(|\meta{second axis node}|)|
  syntax to define an axis with a specific angle.
  \begin{codeexample}[]
\tikz \graph [experimental layout,orientation=(a):0:(c)]   { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(a):45:(c)]  { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(a):90:(c)]  { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(a):120:(c)] { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(a):-45:(c)] { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation=(a):-90:(c)] { a -- b -- c -- a };
  \end{codeexample}
\end{key}

\begin{key}{/tikz/orientation'=\meta{colon-separated list}}
  Does the same as |orientation| except that nodes are flipped over the
  principal axis.
  \begin{codeexample}[]
\tikz \graph [experimental layout,orientation=(a):(b)]  { a -- b -- c -- a };
\tikz \graph [experimental layout,orientation'=(a):(b)] { a -- b -- c -- a };
  \end{codeexample}
\end{key}

\begin{key}{/tikz/desired at=\marg{coordinate}}
  Sets the desired position for a node. In a postprocessing step, the
  |graphdrawing| library will attempt to move the entire graph so that
  the first node with a |desired at| option is moved to its desired 
  location.
  \begin{codeexample}[]
  \end{codeexample}
\end{key}

%\subsection{Packing of Connected Components}
%
%Graphs may be composed of subgraphs or \emph{components} that are not
%connected to each other. In order to draw these nicely, the 
%|graphdrawing| library splits them up into separate graphs, computes
%their layouts with the same graph drawing algorithm independently and,
%in a postprocessing step, arranges them in a non-uniform grid in the 
%final drawing. This is called \emph{component packing}.
%
%The following options can be used to configure the order and placement
%strategy during component packing.
%
%\begin{key}{/tikz/component packing=\marg{options}}
%  Executes the \meta{options} with the path prefix 
%  |/tikz/component packing|.
%  
%  Defines how to arrange the connected components of the graph after 
%  their individual drawings have been computed.
%\end{key}
%
%\begin{key}{/tikz/component packing/layered=\opt{\meta{boolean}} (default true, initially true)}
%  |layered| arranges the different components in a non-uniform grid
%  starting in the top left corner. Components are placed in these 
%  layers in descending order of their size.
%  \begin{codeexample}[]
%\tikz \graph [experimental layout,component packing={layered}] {
%  a -- b -- c -- a,
%  d -- e -- d,
%  g
%};
%  \end{codeexample}
%\end{key}
%
%\begin{key}{/tikz/component packing/centered=\opt{\meta{boolean}} (default true, initially false)}
%  If set to |true|, arranges the different components clockwise in a 
%  non-uniform grid starting at the center. Components are placed in 
%  descending order of their size.
%  \begin{codeexample}[]
%\tikz \graph [experimental layout,component packing={centered}] {
%  a -- b -- c -- a,
%  d -- e -- d,
%  g
%};
%  \end{codeexample}
%\end{key}
%
%\begin{key}{/tikz/component packing/padding=\meta{dimension} (initially 0pt)}
%  Defines how much padding is used to separate the connected 
%  components.
%  \begin{codeexample}[]
%\tikz \graph [experimental layout,component packing={centered,padding=10pt}] {
%  a -- b -- c -- a,
%  d -- e -- d,
%  g
%};
%  \end{codeexample}
%\end{key}

\section{The Spring and Spring-Electrical Drawing Algorithms}

\subsection{Overview}

\subsection{Common Options}

\begin{key}{/tikz/monotonic energy minimization=\opt{\meta{boolean}} 
  (default true, initially false)}
  If set to |true|, requires a step along the force to reduce the
  system energy. If set to |false| even steps that do not lower the 
  system energy are accepted.
  \begin{codeexample}[]
  \end{codeexample}
\end{key}

\begin{key}{/tikz/influence cutoff distance=\meta{dimension} (initially
  0pt)}
  Specifies a distance beyond which the attractive and repulsive forces 
  between two nodes are assumed to be virtually non-existent. If 
  \meta{dimension} is set to |0pt|, the cutoff distance is computed 
  automatically.

  Depending on the graph drawing algorithm being used, the distance
  between two nodes is computed either based on the graph distance
  (spring algorithm) or based on the Euclidean distance
  (spring-electrical algorithm).
  \begin{codeexample}[]
  \end{codeexample}
\end{key}

\begin{key}{/tikz/maximum iterations=\meta{number} (initially 0)}
  Depending on the characteristics of the input graph and the parameters
  chosen for the spring or spring-electrical algorithm, minimizing the
  system energy may require many iterations. In rare cases and only if
  |monotonic energy minimization| and |monotonic step control| are
  turned off, the graph drawing algorithm may not even terminate.

  In these situations it may come in handy to limit the number of
  iterations. This feature can also be useful to draw the same graph
  after different iterations and thereby demonstrate how the spring or
  spring-electrical algorithm improves the drawing step by step.
  \begin{codeexample}[]
  \end{codeexample}
\end{key}

\begin{key}{/tikz/random seed=\meta{number} (initially 0)}
  Specifies the seed used for Lua's pseudo-random number generator. If
  set to something other than |0|, the random number sequence generated
  by the pseudo-random number generator will be the same at every run.
  If set to |0|, the results will be different every time.
\end{key}

\begin{key}{/tikz/coarsening=\marg{options}}
  Executes the \meta{options} with the path prefix |/tikz/coarsening|.
  
  These options define whether a multilevel approach is used that
  successively coarsend into graphs with ... TODO
\end{key}

\subsection{Options for the Spring Algorithm}

\subsection{Options for the Spring-Electrical Algorithm}

%% TODO
%% Explain the following concepts:
%% - separation of graph drawing options and regular TikZ options
%% - generic graph drawing options:
%%   - component packing
%%   - orientation
%% - pre-defined graph drawing styles
%% - graph drawing options for fine-tuning the different algorithms

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "pgfmanual-pdftex-version"
%%% End: 
